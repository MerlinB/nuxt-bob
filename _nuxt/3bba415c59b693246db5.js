(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{606:function(e,t,r){var content=r(642);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("2258bbf2",content,!0,{sourceMap:!1})},641:function(e,t,r){"use strict";var n=r(606);r.n(n).a},642:function(e,t,r){(t=r(18)(!1)).push([e.i,'.messageList[data-v-5bd2b7e9]{border-radius:0}.messageList .v-list-item[data-v-5bd2b7e9]{margin-left:0;margin-right:0}.msg[data-v-5bd2b7e9]{font-size:14px;margin:1em;display:flex}.me.msg[data-v-5bd2b7e9]{flex-direction:row-reverse;margin-left:3em}.them.msg[data-v-5bd2b7e9]{flex-direction:row;margin-right:3em}.me .speech-bubble[data-v-5bd2b7e9]{background:#48acb8;color:#fff}.them .speech-bubble[data-v-5bd2b7e9]{background:#fff;color:#333}.speech-bubble[data-v-5bd2b7e9]{position:relative;border-radius:.3em;padding:.5em;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;word-break:break-word}.speech-bubble[data-v-5bd2b7e9]:after{content:"";position:absolute;bottom:0;width:0;height:0;border:1.2em solid transparent;border-bottom:0;margin-top:-10px}.me .speech-bubble[data-v-5bd2b7e9]:after{border-left-color:#48acb8;border-right:0;right:0;margin-right:-.8em}.them .speech-bubble[data-v-5bd2b7e9]:after{border-right-color:#fff;border-left:0;left:0;margin-left:-.8em}',""]),e.exports=t},653:function(e,t,r){"use strict";r.r(t);r(17),r(13),r(10),r(8),r(14),r(77);var n=r(16),o=(r(52),r(2)),c=r(168),d=(r(160),r(88)),l=r(46),f=r.n(l),m=(r(78),r(79),r(208)),h=r.n(m),v={data:function(){return{message:"",sending:!1}},props:["recipient"],computed:{recipientECIES:function(){if(this.recipient)return h()().publicKey(f.a.PublicKey.fromString(this.recipient.publicKey))}},methods:{sendMessage:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.sending=!0,r=e.recipientECIES.encrypt(e.message).toString("hex"),n=e.$store.getters.encryptECIES.encrypt(e.message).toString("hex"),t.next=5,e.$store.getters.userNode.createChild(e.$store.getters.wallet,{data:[d.a.message,e.recipient.address,r,n]});case 5:o=t.sent,console.log(o),o.txid&&e.$store.dispatch("addMessage",{address:o.address,recipient:e.recipient.address,content:e.message}),e.message="",e.sending=!1,document.getElementById("input").focus();case 11:case"end":return t.stop()}}),t)})))()}}},y=r(57),k=r(90),w=r.n(k),O=r(587),x=r(650),_=r(206),j=r(651),component=Object(y.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-footer",{staticStyle:{background:"white"},attrs:{id:"chatInput",padless:"",tile:"",app:""}},[r("v-textarea",{staticStyle:{"margin-left":"1em"},attrs:{id:"input",color:"secondary darken-2","row-height":"1",disabled:e.sending,"auto-grow":!0,autofocus:!0,loading:e.sending},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.sendMessage(t))}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),r("v-btn",{staticStyle:{margin:"0em 1em"},attrs:{icon:""},on:{click:e.sendMessage}},[r("v-icon",[e._v("mdi-send")])],1)],1)}),[],!1,null,null,null),input=component.exports;w()(component,{VBtn:O.a,VFooter:x.a,VIcon:_.a,VTextarea:j.a});var E=r(634),$=r.n(E);function S(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):S(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var V={middleware:"auth",components:{chatInput:input},computed:C({},Object(c.c)(["decryptECIES"]),{},Object(c.e)(["user"]),{address:function(){return this.$nuxt.$route.params.id},messages:function(){return this.recipient?this.$store.getters.messagesByChat(this.address):[]},recipient:function(){return this.$store.state.contacts[this.address]},recipientName:function(){return this.recipient?this.recipient.name:""}}),created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return $nuxt.$vuetify.goTo(9999999),t.next=3,e.syncContacts([e.address]);case 3:return t.next=5,e.syncMessages();case 5:case"end":return t.stop()}}),t)})))()},methods:C({},Object(c.b)(["syncMessages","syncContacts"]),{linkify:function(content){return $()(content)},sentByMe:function(e){return e.sender===this.user.address}})},I=(r(641),r(586)),M=r(590),P=r(588),B=r(207),L=r(122),D=r(214),T=Object(y.a)(V,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{color:"primary",app:"","elevate-on-scroll":""}},[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$nuxt.$router.push("/")}}},[r("v-icon",{attrs:{color:"black"}},[e._v("mdi-arrow-left")])],1),e._v(" "),r("v-toolbar-title",[e._v(e._s(e.recipientName))])],1),e._v(" "),r("v-content",{staticStyle:{background:"#eceff1"}},[r("v-list",{staticClass:"messageList",attrs:{color:"transparent",tile:"",dense:"",id:"messageList"}},e._l(e.messages,(function(t,i){return r("v-list-item",{key:i,class:["msg",e.sentByMe(t)?"me":"them"],attrs:{selectable:""}},[r("div",{class:["speech-bubble"]},[r("span",{domProps:{innerHTML:e._s(e.linkify(t.content))}}),e._v(" "),e.sentByMe(t)?r("span",[r("v-icon",{attrs:{dark:"",small:""}},[e._v(e._s(t.confirmed?"mdi-check-all":"mdi-check"))])],1):e._e()])])})),1)],1),e._v(" "),r("chatInput",{attrs:{recipient:e.recipient}})],1)}),[],!1,null,"5bd2b7e9",null);t.default=T.exports;w()(T,{VApp:I.a,VAppBar:M.a,VBtn:O.a,VContent:P.a,VIcon:_.a,VList:B.a,VListItem:L.a,VToolbarTitle:D.a})}}]);