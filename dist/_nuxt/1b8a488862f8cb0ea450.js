(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{578:function(e,t,r){var content=r(595);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(20).default)("33ea5996",content,!0,{sourceMap:!1})},594:function(e,t,r){"use strict";var n=r(578);r.n(n).a},595:function(e,t,r){(e.exports=r(19)(!1)).push([e.i,'.messageList[data-v-1ffe0be4]{border-radius:0}.messageList .v-list-item[data-v-1ffe0be4]{margin-left:0;margin-right:0}.msg[data-v-1ffe0be4]{font-size:14px;margin:1em;display:flex}.me.msg[data-v-1ffe0be4]{flex-direction:row-reverse;margin-left:3em}.them.msg[data-v-1ffe0be4]{flex-direction:row;margin-right:3em}.me .speech-bubble[data-v-1ffe0be4]{background:#00766c;color:#fff}.them .speech-bubble[data-v-1ffe0be4]{background:#fff;color:#333}.speech-bubble[data-v-1ffe0be4]{position:relative;border-radius:.3em;padding:.5em;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.speech-bubble[data-v-1ffe0be4]:after{content:"";position:absolute;bottom:0;width:0;height:0;border:1.2em solid transparent;border-bottom:0;margin-top:-10px}.me .speech-bubble[data-v-1ffe0be4]:after{border-left-color:#00766c;border-right:0;right:0;margin-right:-.8em}.them .speech-bubble[data-v-1ffe0be4]:after{border-right-color:#fff;border-left:0;left:0;margin-left:-.8em}',""])},596:function(e,t,r){var content=r(597);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(20).default)("bb35a8d6",content,!0,{sourceMap:!1})},597:function(e,t,r){(e.exports=r(19)(!1)).push([e.i,".theme--light.v-footer{background-color:#f5f5f5;color:rgba(0,0,0,.87)}.theme--dark.v-footer{background-color:#212121;color:#fff}.v-footer{align-items:center;display:flex;flex:0 1 auto!important;flex-wrap:wrap;padding:6px 16px;position:relative;transition-duration:.2s;transition-property:background-color,left,right;transition-timing-function:cubic-bezier(.4,0,.2,1)}.v-footer:not([data-booted=true]){transition:none!important}.v-footer--absolute,.v-footer--fixed{z-index:3}.v-footer--absolute{position:absolute;width:100%}.v-footer--fixed{position:fixed}.v-footer--padless{padding:0}",""])},598:function(e,t,r){var content=r(599);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(20).default)("5c8fbe94",content,!0,{sourceMap:!1})},599:function(e,t,r){(e.exports=r(19)(!1)).push([e.i,".theme--light.v-textarea.v-text-field--solo-inverted.v-text-field--solo.v-input--is-focused textarea{color:#fff}.theme--dark.v-textarea.v-text-field--solo-inverted.v-text-field--solo.v-input--is-focused textarea{color:rgba(0,0,0,.87)}.v-textarea textarea{flex:1 1 auto;line-height:18px;max-width:100%;min-height:32px;outline:none;padding:7px 0 8px;width:100%}.v-textarea .v-text-field__prefix{padding-top:4px;align-self:start}.v-textarea.v-text-field--box .v-text-field__prefix,.v-textarea.v-text-field--box textarea,.v-textarea.v-text-field--enclosed .v-text-field__prefix,.v-textarea.v-text-field--enclosed textarea{margin-top:24px}.v-textarea.v-text-field--box.v-text-field--outlined .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined textarea,.v-textarea.v-text-field--box.v-text-field--single-line .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line textarea{margin-top:12px}.v-textarea.v-text-field--box.v-text-field--outlined .v-label,.v-textarea.v-text-field--box.v-text-field--single-line .v-label,.v-textarea.v-text-field--enclosed.v-text-field--outlined .v-label,.v-textarea.v-text-field--enclosed.v-text-field--single-line .v-label{top:18px}.v-textarea.v-text-field--solo{align-items:flex-start}.v-textarea.v-text-field--solo .v-input__append-inner,.v-textarea.v-text-field--solo .v-input__append-outer,.v-textarea.v-text-field--solo .v-input__prepend-inner,.v-textarea.v-text-field--solo .v-input__prepend-outer{align-self:flex-start;margin-top:16px}.v-application--is-ltr .v-textarea.v-text-field--solo .v-input__append-inner{padding-left:12px}.v-application--is-rtl .v-textarea.v-text-field--solo .v-input__append-inner{padding-right:12px}.v-textarea--auto-grow textarea{overflow:hidden}.v-textarea--no-resize textarea{resize:none}.v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:-12px}.v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:0;margin-left:-12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:0;padding-left:12px}",""])},612:function(e,t,r){"use strict";r.r(t);r(17),r(13),r(10),r(14),r(77),r(78),r(8),r(76);var n=r(16),o=r(2),l=r(165),c=r(123),f=r(124),d=r(293),v=r.n(d),h=r(80),x=r.n(h);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w,O,_,j={middleware:"auth",data:function(){return{recipient:void 0,message:"",sending:!1}},computed:y({},Object(l.c)(["wallet","userNode","ecies"]),{recipientName:function(){if(this.recipient)return this.recipient.opReturn.s7},messages:function(){return this.recipient?this.$nuxt.$store.getters.messagesByChat(this.recipient.address):[]},recipientEcies:function(){return v()().publicKey(x.a.PublicKey.fromString(this.recipient.opReturn.s8))}}),created:(_=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={"out.s6":f.a.user,"node.a":this.$nuxt.$route.params.id},e.next=3,c.TreeHugger.findSingleNode({find:t});case 3:return(r=e.sent)&&(this.recipient=r),e.next=7,this.syncMessages();case 7:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)}),methods:y({},Object(l.b)(["syncReceivedMessages","syncSentMessages"]),{sendMessage:(O=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sending=!0,t=this.recipientEcies.encrypt(this.message).toString("hex"),r=this.ecies.encrypt(this.message).toString("hex"),e.next=5,this.userNode.createChild(this.wallet,{data:[f.a.message,this.recipient.address,t,r]});case 5:n=e.sent,this.message="",console.log(n),this.sending=!1;case 9:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)}),syncMessages:(w=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncSentMessages(this.recipient.address);case 2:return e.next=4,this.syncReceivedMessages(this.recipient.address);case 4:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)}),decrypt:function(e){try{return this.sentByMe(e)?this.ecies.decrypt(x.a.deps.Buffer.from(e.opReturn.s9,"hex")).toString():this.recipientEcies.decrypt(x.a.deps.Buffer.from(e.opReturn.s8,"hex")).toString()}catch(e){return e}},sentByMe:function(e){return e.tx.parent.a===this.userNode.address}})},k=(r(594),r(58)),P=r(88),S=r.n(P),R=r(561),B=r(566),N=r(562),$=r(563),I=(r(209),r(26),r(596),r(237)),M=r(63),D=r(157),H=r(9),z=r(0);function E(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function V(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var C=Object(H.a)(M.a,Object(I.a)("footer",["height","inset"]),D.a).extend({name:"v-footer",props:{height:{default:"auto",type:[Number,String]},inset:Boolean,padless:Boolean,tile:{type:Boolean,default:!0}},computed:{applicationProperty:function(){return this.inset?"insetFooter":"footer"},classes:function(){return V({},M.a.options.computed.classes.call(this),{"v-footer--absolute":this.absolute,"v-footer--fixed":!this.absolute&&(this.app||this.fixed),"v-footer--padless":this.padless,"v-footer--inset":this.inset})},computedBottom:function(){if(this.isPositioned)return this.app?this.$vuetify.application.bottom:0},computedLeft:function(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.left:0},computedRight:function(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.right:0},isPositioned:function(){return Boolean(this.absolute||this.fixed||this.app)},styles:function(){var e=parseInt(this.height);return V({},M.a.options.computed.styles.call(this),{height:isNaN(e)?e:Object(z.c)(e),left:Object(z.c)(this.computedLeft),right:Object(z.c)(this.computedRight),bottom:Object(z.c)(this.computedBottom)})}},methods:{updateApplication:function(){var e=parseInt(this.height);return isNaN(e)?this.$el?this.$el.clientHeight:0:e}},render:function(e){return e("footer",this.setBackgroundColor(this.color,{staticClass:"v-footer",class:this.classes,style:this.styles}),this.$slots.default)}}),G=r(201),L=r(202),T=r(122),F=(r(598),r(600));function A(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var K=Object(H.a)(F.a).extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(e){return!isNaN(parseFloat(e))}},rows:{type:[Number,String],default:5,validator:function(e){return!isNaN(parseInt(e,10))}}},computed:{classes:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?A(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):A(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},F.a.options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var e=this;setTimeout((function(){e.autoGrow&&e.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var input=this.$refs.input;if(input){input.style.height="0";var e=input.scrollHeight,t=parseInt(this.rows,10)*parseFloat(this.rowHeight);input.style.height=Math.max(t,e)+"px"}},genInput:function(){var input=F.a.options.methods.genInput.call(this);return input.tag="textarea",delete input.data.attrs.type,input.data.attrs.rows=this.rows,input},onInput:function(e){F.a.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}}),J=r(210),component=Object(k.a)(j,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{color:"primary",dark:"",app:"","elevate-on-scroll":""}},[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$nuxt.$router.push("/")}}},[r("v-icon",[e._v("mdi-arrow-left")])],1),e._v(" "),r("v-toolbar-title",[e._v(e._s(e.recipientName))])],1),e._v(" "),r("v-content",{staticStyle:{background:"#eceff1"}},[r("v-list",{staticClass:"messageList",attrs:{color:"transparent",tile:"",dense:""}},e._l(e.messages,(function(t,i){return r("v-list-item",{key:i,class:["msg",e.sentByMe(t)?"me":"them"],attrs:{selectable:""}},[r("div",{class:["speech-bubble"]},[e._v(e._s(e.decrypt(t)))])])})),1)],1),e._v(" "),r("v-footer",{staticStyle:{background:"white"},attrs:{id:"chatInput",padless:"",tile:"",app:""}},[r("v-textarea",{staticStyle:{"margin-left":"1em"},attrs:{"row-height":"1","auto-grow":!0,autofocus:!0,loading:e.sending},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.sendMessage(t))}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),r("v-btn",{staticStyle:{margin:"0em 1em"},attrs:{icon:""},on:{click:e.sendMessage}},[r("v-icon",[e._v("mdi-send")])],1)],1)],1)}),[],!1,null,"1ffe0be4",null);t.default=component.exports;S()(component,{VApp:R.a,VAppBar:B.a,VBtn:N.a,VContent:$.a,VFooter:C,VIcon:G.a,VList:L.a,VListItem:T.a,VTextarea:K,VToolbarTitle:J.a})}}]);